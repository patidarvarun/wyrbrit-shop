(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5706],{23926:function(e,r,t){"use strict";var n=t(67294),o=t(30067),i=t(73633),a=t(57094),c=t(85893);function s(e){return e.substring(2).toLowerCase()}r.Z=function(e){const{children:r,disableReactTree:t=!1,mouseEvent:l="onClick",onClickAway:u,touchEvent:d="onTouchEnd"}=e,f=n.useRef(!1),p=n.useRef(null),h=n.useRef(!1),v=n.useRef(!1);n.useEffect((()=>(setTimeout((()=>{h.current=!0}),0),()=>{h.current=!1})),[]);const m=(0,o.Z)(r.ref,p),x=(0,i.Z)((e=>{const r=v.current;v.current=!1;const n=(0,a.Z)(p.current);if(!h.current||!p.current||"clientX"in e&&function(e,r){return r.documentElement.clientWidth<e.clientX||r.documentElement.clientHeight<e.clientY}(e,n))return;if(f.current)return void(f.current=!1);let o;o=e.composedPath?e.composedPath().indexOf(p.current)>-1:!n.documentElement.contains(e.target)||p.current.contains(e.target),o||!t&&r||u(e)})),y=e=>t=>{v.current=!0;const n=r.props[e];n&&n(t)},b={ref:m};return!1!==d&&(b[d]=y(d)),n.useEffect((()=>{if(!1!==d){const e=s(d),r=(0,a.Z)(p.current),t=()=>{f.current=!0};return r.addEventListener(e,x),r.addEventListener("touchmove",t),()=>{r.removeEventListener(e,x),r.removeEventListener("touchmove",t)}}}),[x,d]),!1!==l&&(b[l]=y(l)),n.useEffect((()=>{if(!1!==l){const e=s(l),r=(0,a.Z)(p.current);return r.addEventListener(e,x),()=>{r.removeEventListener(e,x)}}}),[x,l]),(0,c.jsx)(n.Fragment,{children:n.cloneElement(r,b)})}},51107:function(e,r,t){"use strict";t.d(r,{Z:function(){return g}});var n=t(63366),o=t(87462),i=t(67294),a=(t(59864),t(86010)),c=t(94780),s=t(90948),l=t(71657),u=t(54801),d=t(87952),f=t(34867);function p(e){return(0,f.Z)("MuiAvatarGroup",e)}var h=(0,t(1588).Z)("MuiAvatarGroup",["root","avatar"]),v=t(85893);const m=["children","className","componentsProps","max","spacing","total","variant"],x={small:-16,medium:null},y=(0,s.ZP)("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(e,r)=>(0,o.Z)({[`& .${h.avatar}`]:r.avatar},r.root)})((({theme:e})=>({[`& .${u.Z.root}`]:{border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"}))),b=(0,s.ZP)(d.Z,{name:"MuiAvatarGroup",slot:"Avatar",overridesResolver:(e,r)=>r.avatar})((({theme:e})=>({border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}})));var g=i.forwardRef((function(e,r){var t,s;const u=(0,l.Z)({props:e,name:"MuiAvatarGroup"}),{children:d,className:f,componentsProps:h={},max:g=5,spacing:j="medium",total:w,variant:Z="circular"}=u,O=(0,n.Z)(u,m);let S=g<2?2:g;const P=(0,o.Z)({},u,{max:g,spacing:j,variant:Z}),k=(e=>{const{classes:r}=e;return(0,c.Z)({root:["root"],avatar:["avatar"]},p,r)})(P),C=i.Children.toArray(d).filter((e=>i.isValidElement(e))),A=w||C.length;A===S&&(S+=1),S=Math.min(A+1,S);const R=Math.min(C.length,S-1),M=Math.max(A-S,A-R,0),E=j&&void 0!==x[j]?x[j]:-j;return(0,v.jsxs)(y,(0,o.Z)({ownerState:P,className:(0,a.Z)(k.root,f),ref:r},O,{children:[M?(0,v.jsxs)(b,(0,o.Z)({ownerState:P,variant:Z},h.additionalAvatar,{className:(0,a.Z)(k.avatar,null==(t=h.additionalAvatar)?void 0:t.className),style:(0,o.Z)({marginLeft:E},null==(s=h.additionalAvatar)?void 0:s.style),children:["+",M]})):null,C.slice(0,R).reverse().map(((e,r)=>i.cloneElement(e,{className:(0,a.Z)(e.props.className,k.avatar),style:(0,o.Z)({marginLeft:r===R-1?void 0:E},e.props.style),variant:e.props.variant||Z})))]}))}))},66242:function(e,r,t){"use strict";t.d(r,{Z:function(){return m}});var n=t(87462),o=t(63366),i=t(67294),a=t(86010),c=t(94780),s=t(90948),l=t(71657),u=t(55113),d=t(34867);function f(e){return(0,d.Z)("MuiCard",e)}(0,t(1588).Z)("MuiCard",["root"]);var p=t(85893);const h=["className","raised"],v=(0,s.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({overflow:"hidden"})));var m=i.forwardRef((function(e,r){const t=(0,l.Z)({props:e,name:"MuiCard"}),{className:i,raised:s=!1}=t,u=(0,o.Z)(t,h),d=(0,n.Z)({},t,{raised:s}),m=(e=>{const{classes:r}=e;return(0,c.Z)({root:["root"]},f,r)})(d);return(0,p.jsx)(v,(0,n.Z)({className:(0,a.Z)(m.root,i),elevation:s?8:void 0,ref:r,ownerState:d},u))}))},83965:function(e,r,t){"use strict";t.d(r,{Z:function(){return x}});var n=t(63366),o=t(87462),i=t(67294),a=t(86010),c=t(94780),s=t(71657),l=t(90948),u=t(34867);function d(e){return(0,u.Z)("MuiCardMedia",e)}(0,t(1588).Z)("MuiCardMedia",["root","media","img"]);var f=t(85893);const p=["children","className","component","image","src","style"],h=(0,l.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e,{isMediaComponent:n,isImageComponent:o}=t;return[r.root,n&&r.media,o&&r.img]}})((({ownerState:e})=>(0,o.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"}))),v=["video","audio","picture","iframe","img"],m=["picture","img"];var x=i.forwardRef((function(e,r){const t=(0,s.Z)({props:e,name:"MuiCardMedia"}),{children:i,className:l,component:u="div",image:x,src:y,style:b}=t,g=(0,n.Z)(t,p),j=-1!==v.indexOf(u),w=!j&&x?(0,o.Z)({backgroundImage:`url("${x}")`},b):b,Z=(0,o.Z)({},t,{component:u,isMediaComponent:j,isImageComponent:-1!==m.indexOf(u)}),O=(e=>{const{classes:r,isMediaComponent:t,isImageComponent:n}=e,o={root:["root",t&&"media",n&&"img"]};return(0,c.Z)(o,d,r)})(Z);return(0,f.jsx)(h,(0,o.Z)({className:(0,a.Z)(O.root,l),as:u,role:!j&&x?"img":void 0,ref:r,style:w,ownerState:Z,src:j?x||y:void 0},g,{children:i}))}))},88157:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/chat",function(){return t(54386)}])},2940:function(e,r,t){"use strict";t.d(r,{X:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,n.jsx)("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z",clipRule:"evenodd"})]}),"Archive")},25543:function(e,r,t){"use strict";t.d(r,{B:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"})}),"DotsHorizontal")},97777:function(e,r,t){"use strict";t.d(r,{j:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M3 7a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 13a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"MenuAlt4")},95440:function(e,r,t){"use strict";t.d(r,{$:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}),"PaperAirplane")},91368:function(e,r,t){"use strict";t.d(r,{F:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})}),"PaperClip")},98380:function(e,r,t){"use strict";t.d(r,{D:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),"Photograph")},23064:function(e,r,t){"use strict";t.d(r,{v:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Plus")},60893:function(e,r,t){"use strict";t.d(r,{r:function(){return o}});var n=t(85893),o=(0,t(82066).Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Trash")},54386:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return pr}});var n=t(85893),o=t(67294),i=t(9008),a=t.n(i),c=t(11163),s=t(98396),l=t(87357),u=t(93946),d=t(87952),f=t(15861),p=t(90948),h=t(63118),v=t(5621),m=t(34051),x=t.n(m),y=t(67720),b=t(58151),g=t(83720),j=t(45697),w=t.n(j),Z=t(50135),O=t(87109),S=t(87918),P=t(23926),k=t(21849),C=t(55113),A=t(78462),R=t(19294),M=t(18987),E=t(59334),I=t(24782),T=t(13138),z=t(52377);function B(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function D(e,r,t,n,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,o)}function H(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function L(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){H(e,r,t[r])}))}return e}function N(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function W(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return B(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return B(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var G=function(e){var r=e.onAddRecipient,t=e.onRemoveRecipient,i=e.recipients,a=N(e,["onAddRecipient","onRemoveRecipient","recipients"]),c=(0,o.useRef)(null),s=(0,o.useState)(""),u=s[0],p=s[1],h=(0,o.useState)(!0),v=h[0],m=h[1],y=(0,o.useState)([]),b=y[0],g=y[1],j=u&&v,w=function(e,r){var t=r.reduce((function(e,r){return W(e).concat([r.id])}),[]);return e.filter((function(e){return!t.includes(e.id)}))}(b,i),B=function(){var e,r=(e=x().mark((function e(r){var t,n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=r.target.value,p(t),!t){e.next=10;break}return e.next=6,I.x.getContacts(t);case 6:n=e.sent,g(n),e.next=11;break;case 10:g([]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var r=this,t=arguments;return new Promise((function(n,o){var i=e.apply(r,t);function a(e){D(i,n,o,a,c,"next",e)}function c(e){D(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,L({sx:{borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1}},a,{children:(0,n.jsx)(z.L,{children:(0,n.jsxs)(l.Z,{sx:{alignItems:"center",display:"flex",p:2},children:[(0,n.jsx)(l.Z,{ref:c,sx:{alignItems:"center",display:"flex",mr:1,"& .MuiInputBase-root":{backgroundColor:"background.paper",height:40,minWidth:260}},children:(0,n.jsx)(Z.Z,{fullWidth:!0,onBlur:function(){j||m(!1)},onChange:B,onFocus:function(){m(!0)},placeholder:"Search contacts",InputProps:{startAdornment:(0,n.jsx)(O.Z,{position:"start",children:(0,n.jsx)(T.o,{fontSize:"small"})})},value:u})}),(0,n.jsx)(f.Z,{color:"textSecondary",sx:{mr:2},variant:"body2",children:"To:"}),i.reverse().map((function(e){return(0,n.jsx)(S.Z,{avatar:(0,n.jsx)(d.Z,{src:e.avatar}),label:e.name,onDelete:function(){return r=e.id,void(t&&t(r));var r},sx:{mr:2}},e.id)}))]})})})),j&&(0,n.jsx)(P.Z,{onClickAway:function(){m(!1)},children:(0,n.jsx)(k.Z,{anchorEl:null===c||void 0===c?void 0:c.current,open:v,placement:"bottom-start",children:(0,n.jsx)(C.Z,{elevation:16,sx:{borderColor:"divider",borderStyle:"solid",borderWidth:1,maxWidth:"100%",mt:1,width:320},children:0===w.length?(0,n.jsxs)(l.Z,{sx:{p:2,textAlign:"center"},children:[(0,n.jsx)(f.Z,{gutterBottom:!0,variant:"h6",children:"Nothing Found"}),(0,n.jsxs)(f.Z,{color:"textSecondary",variant:"body2",children:["We couldn't find any matches for \"",u,'". Try checking for typos or using complete words.']})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{sx:{px:2,pt:2},children:(0,n.jsx)(f.Z,{color:"textSecondary",variant:"subtitle2",children:"Contacts"})}),(0,n.jsx)(A.Z,{children:w.map((function(e){return(0,n.jsxs)(R.ZP,{button:!0,onClick:function(){return t=e,p(""),void(r&&r(t));var t},children:[(0,n.jsx)(M.Z,{children:(0,n.jsx)(d.Z,{src:e.avatar})}),(0,n.jsx)(E.Z,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)}))})]})})})})]})};G.propTypes={onAddRecipient:w().func,onRemoveRecipient:w().func,recipients:w().array},G.defaultProps={recipients:[]};var F=t(34386),q=t(95440),V=t(98380),X=t(91368);function _(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function $(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var K=function(e){var r=e.disabled,t=e.onSend,i=$(e,["disabled","onSend"]),a=(0,o.useRef)(null),c=(0,o.useState)(""),s=c[0],f=c[1],p=function(){var e;null===(e=a.current)||void 0===e||e.click()},h=function(){s&&(null===t||void 0===t||t(s),f(""))};return(0,n.jsxs)(l.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){_(e,r,t[r])}))}return e}({sx:{alignItems:"center",backgroundColor:"background.paper",display:"flex",flexShrink:0,p:3}},i,{children:[(0,n.jsx)(d.Z,{sx:{display:{xs:"none",sm:"inline"},mr:2},src:"/static/mock-images/avatars/avatar-anika_visser.png"}),(0,n.jsx)(Z.Z,{disabled:r,fullWidth:!0,onChange:function(e){f(e.target.value)},onKeyUp:function(e){"Enter"===e.code&&h()},placeholder:"Leave a message",value:s,size:"small"}),(0,n.jsxs)(l.Z,{sx:{alignItems:"center",display:"flex",m:-2,ml:2},children:[(0,n.jsx)(F.Z,{title:"Send",children:(0,n.jsx)(l.Z,{sx:{m:1},children:(0,n.jsx)(u.Z,{color:"primary",disabled:!s||r,sx:{backgroundColor:"primary.main",color:"primary.contrastText","&:hover":{backgroundColor:"primary.dark"}},onClick:h,children:(0,n.jsx)(q.$,{fontSize:"small"})})})}),(0,n.jsx)(F.Z,{title:"Attach photo",children:(0,n.jsx)(l.Z,{sx:{display:{xs:"none",sm:"inline-flex"},m:1},children:(0,n.jsx)(u.Z,{disabled:r,edge:"end",onClick:p,children:(0,n.jsx)(V.D,{fontSize:"small"})})})}),(0,n.jsx)(F.Z,{title:"Attach file",children:(0,n.jsx)(l.Z,{sx:{display:{xs:"none",sm:"inline-flex"},m:1},children:(0,n.jsx)(u.Z,{disabled:r,edge:"end",onClick:p,children:(0,n.jsx)(X.F,{fontSize:"small"})})})})]}),(0,n.jsx)("input",{hidden:!0,ref:a,type:"file"})]}))};function U(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Y(e,r,t,n,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,o)}function J(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Q(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return U(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return U(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}K.propTypes={disabled:w().bool,onSend:w().func},K.defaultProps={disabled:!1};var ee=function(e){var r=(0,g.I0)(),t=(0,c.useRouter)(),i=(0,o.useState)([]),a=i[0],s=i[1],u=function(){var e,n=(e=x().mark((function e(n){var o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r((0,b.Hz)({recipientIds:a.map((function(e){return e.id})),body:n}));case 3:o=e.sent,t.push("/dashboard/chat?threadKey=".concat(o)).catch(console.error),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var r=this,t=arguments;return new Promise((function(n,o){var i=e.apply(r,t);function a(e){Y(i,n,o,a,c,"next",e)}function c(e){Y(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}();return(0,n.jsxs)(l.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){J(e,r,t[r])}))}return e}({sx:{display:"flex",flexDirection:"column",flexGrow:1}},e,{children:[(0,n.jsx)(G,{onAddRecipient:function(e){s((function(r){return r.find((function(r){return r.id===e.id}))?a:Q(a).concat([e])}))},onRemoveRecipient:function(e){s((function(r){return r.filter((function(r){return r.id!==e}))}))},recipients:a}),(0,n.jsx)(l.Z,{sx:{backgroundColor:"background.default",flexGrow:1}}),(0,n.jsx)(y.Z,{}),(0,n.jsx)(K,{disabled:0===a.length,onSend:u})]}))},re=t(41664),te=t.n(re),ne=t(77533),oe=t(11057),ie=t(23064),ae=t(89081),ce=t(8494);function se(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function le(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){se(e,r,t[r])}))}return e}function ue(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var de=(0,o.forwardRef)((function(e,r){var t=e.isFocused,o=e.onChange,i=e.onClickAway,a=e.onFocus,c=e.onSelect,s=e.query,u=e.results,p=ue(e,["isFocused","onChange","onClickAway","onFocus","onSelect","query","results"]),h=s&&t;return(0,n.jsx)(P.Z,{onClickAway:function(){return null===i||void 0===i?void 0:i()},children:(0,n.jsxs)(l.Z,le({ref:r,sx:{p:2}},p,{children:[(0,n.jsx)(Z.Z,{fullWidth:!0,onChange:o,onFocus:a,placeholder:"Search contacts",InputProps:{startAdornment:(0,n.jsx)(O.Z,{position:"start",children:(0,n.jsx)(T.o,{fontSize:"small"})})},value:s}),Boolean(t&&!s)&&(0,n.jsx)(l.Z,{sx:{py:2},children:(0,n.jsx)(ce.C,{message:"Enter a contact name"})}),Boolean(h&&0===u.length)&&(0,n.jsx)(l.Z,{sx:{py:2},children:(0,n.jsxs)(f.Z,{color:"textSecondary",variant:"body2",children:["We couldn't find any matches for \"",s,'". Try checking for typos or using complete words.']})}),h&&u.length>0&&(0,n.jsxs)(l.Z,{sx:{py:2},children:[(0,n.jsx)(f.Z,{color:"textSecondary",variant:"subtitle2",children:"Contacts"}),(0,n.jsx)(A.Z,{children:u.map((function(e){return(0,n.jsxs)(R.ZP,{button:!0,onClick:function(){return function(e){c&&c(e)}(e)},children:[(0,n.jsx)(M.Z,{children:(0,n.jsx)(d.Z,{src:e.avatar,sx:{height:32,width:32}})}),(0,n.jsx)(E.Z,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)}))})]})]}))})}));de.propTypes={isFocused:w().bool,onChange:w().func,onClickAway:w().func,onFocus:w().func,onSelect:w().func,query:w().string,results:w().array.isRequired},de.defaultProps={isFocused:!1,query:"",results:[]};var fe=t(12195),pe=t(35077),he=t(51107);function ve(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function me(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function xe(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){me(e,r,t[r])}))}return e}function ye(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function be(e){return function(e){if(Array.isArray(e))return ve(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return ve(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ve(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ge={lessThanXSeconds:"{{count}}s",xSeconds:"{{count}}s",halfAMinute:"30s",lessThanXMinutes:"{{count}}m",xMinutes:"{{count}}m",aboutXHours:"{{count}}h",xHours:"{{count}}h",xDays:"{{count}}d",aboutXWeeks:"{{count}}w",xWeeks:"{{count}}w",aboutXMonths:"{{count}}m",xMonths:"{{count}}m",aboutXYears:"{{count}}y",xYears:"{{count}}y",overXYears:"{{count}}y",almostXYears:"{{count}}y"},je=xe({},pe.Z,{formatDistance:function(e,r,t){t=t||{};var n=ge[e].replace("{{count}}",r);return t.addSuffix?t.comparison>0?"in "+n:n+" ago":n}}),we=function(e){var r=e.active,t=e.thread,o=e.onSelect,i=ye(e,["active","thread","onSelect"]),a="5e86809283e28b96d2d38537",c=t.participants.filter((function(e){return e.id!==a})),s=t.messages[t.messages.length-1],u=c.reduce((function(e,r){return be(e).concat([r.name])}),[]).join(", "),p="";if(s){var h=s.authorId===a?"Me: ":"",v="image"===s.contentType?"Sent a photo":s.body;p="".concat(h).concat(v)}return(0,n.jsxs)(R.ZP,xe({disableGutters:!0,disablePadding:!0,divider:!0,onClick:o,sx:xe({},r&&{backgroundColor:"action.selected"},{cursor:"pointer",overflow:"hidden",px:2,py:3})},i,{children:[(0,n.jsx)(M.Z,{sx:{display:"flex",justifyContent:{sm:"flex-start",xs:"center"}},children:(0,n.jsx)(he.Z,{max:2,sx:{"& .MuiAvatar-root":c.length>1?{height:26,width:26,"&:nth-of-type(2)":{mt:"10px"}}:{height:36,width:36}},children:c.map((function(e){return(0,n.jsx)(d.Z,{src:e.avatar||void 0},e.id)}))})}),(0,n.jsxs)(l.Z,{sx:{flexGrow:1,mr:2,overflow:"hidden"},children:[(0,n.jsx)(f.Z,{noWrap:!0,variant:"subtitle2",children:u}),(0,n.jsxs)(l.Z,{sx:{alignItems:"center",display:"flex"},children:[Boolean(t.unreadCount&&t.unreadCount>0)&&(0,n.jsx)(l.Z,{sx:{backgroundColor:"primary.main",borderRadius:"50%",height:8,mr:1,width:8}}),(0,n.jsx)(f.Z,{color:"textSecondary",noWrap:!0,sx:{flexGrow:1},variant:"subtitle2",children:p})]})]}),(0,n.jsx)(f.Z,{color:"textSecondary",sx:{whiteSpace:"nowrap"},variant:"caption",children:(0,fe.Z)(s.createdAt,new Date,{addSuffix:!1,locale:je})})]}))};function Ze(e,r,t,n,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,o)}function Oe(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Se(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){Oe(e,r,t[r])}))}return e}function Pe(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}we.propTypes={active:w().bool,onSelect:w().func,thread:w().object.isRequired},we.defaultProps={active:!1};var ke=(0,p.ZP)(ne.ZP)({flexShrink:0,width:380,"& .MuiDrawer-paper":{position:"relative",width:380}}),Ce=(0,p.ZP)(ne.ZP)({maxWidth:"100%",width:380,"& .MuiDrawer-paper":{height:"calc(100% - 64px)",maxWidth:"100%",top:64,width:380}}),Ae=function(e){var r=e.containerRef,t=e.onClose,i=e.open,a=Pe(e,["containerRef","onClose","open"]),d=(0,c.useRouter)(),p=(0,g.v9)((function(e){return e.chat})),h=p.threads,v=p.activeThreadId,m=(0,o.useState)(!1),y=m[0],b=m[1],j=(0,o.useState)(""),w=j[0],Z=j[1],O=(0,o.useState)([]),S=O[0],P=O[1],k=(0,s.Z)((function(e){return e.breakpoints.up("md")})),C=function(){var e,r=(e=x().mark((function e(r){var t,n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=r.target.value,Z(t),!t){e.next=10;break}return e.next=6,I.x.getContacts(t);case 6:n=e.sent,P(n),e.next=11;break;case 10:P([]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var r=this,t=arguments;return new Promise((function(n,o){var i=e.apply(r,t);function a(e){Ze(i,n,o,a,c,"next",e)}function c(e){Ze(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}(),R=(0,n.jsxs)("div",{children:[(0,n.jsxs)(l.Z,{sx:{alignItems:"center",display:"flex",p:2},children:[(0,n.jsx)(f.Z,{variant:"h5",children:"Chats"}),(0,n.jsx)(l.Z,{sx:{flexGrow:1}}),(0,n.jsx)(te(),{href:"/dashboard/chat?compose=true",passHref:!0,children:(0,n.jsx)(oe.Z,{component:"a",onClick:function(){k||null===t||void 0===t||t()},startIcon:(0,n.jsx)(ie.v,{}),variant:"contained",children:"Group"})}),(0,n.jsx)(u.Z,{onClick:t,sx:{display:{sm:"none"},ml:2},children:(0,n.jsx)(ae.X,{fontSize:"small"})})]}),(0,n.jsx)(de,{isFocused:y,onChange:C,onClickAway:function(){b(!1),Z("")},onFocus:function(){b(!0)},onSelect:function(e){b(!1),Z(""),k||null===t||void 0===t||t(),d.push("/dashboard/chat?threadKey=".concat(e.id)).catch(console.error)},query:w,results:S}),(0,n.jsx)(l.Z,{sx:{borderTopColor:"divider",borderTopStyle:"solid",borderTopWidth:1,display:y?"none":"block"},children:(0,n.jsx)(z.L,{children:(0,n.jsx)(A.Z,{disablePadding:!0,children:h.allIds.map((function(e){return(0,n.jsx)(we,{active:v===e,onSelect:function(){return function(e){var r,n=h.byId[e];r="GROUP"===n.type?n.id:n.participantIds.find((function(e){return"5e86809283e28b96d2d38537"!==e})),k||null===t||void 0===t||t(),d.push("/dashboard/chat?threadKey=".concat(r)).catch(console.error)}(e)},thread:h.byId[e]},e)}))})})})]});return k?(0,n.jsx)(ke,Se({anchor:"left",open:i,SlideProps:{container:null===r||void 0===r?void 0:r.current},variant:"persistent"},a,{children:R})):(0,n.jsx)(Ce,Se({anchor:"left",ModalProps:{container:null===r||void 0===r?void 0:r.current},onClose:t,open:i,SlideProps:{container:null===r||void 0===r?void 0:r.current},variant:"temporary"},a,{children:R}))};Ae.propTypes={containerRef:w().any,onClose:w().func,open:w().bool};var Re=t(44086),Me=t(66242),Ee=t(50122),Ie=t(83965);function Te(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ze(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var Be=function(e){var r=e.body,t=e.contentType,i=e.createdAt,a=e.authorAvatar,c=e.authorName,s=e.authorType,u=ze(e,["body","contentType","createdAt","authorAvatar","authorName","authorType"]),p=(0,o.useState)(!1),h=(p[0],p[1]);return(0,n.jsxs)(l.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){Te(e,r,t[r])}))}return e}({sx:{display:"flex",flexDirection:"user"===s?"row-reverse":"row",maxWidth:500,ml:"user"===s?"auto":0,mb:2}},u,{children:[(0,n.jsx)(d.Z,{src:a||void 0,sx:{height:32,ml:"user"===s?2:0,mr:"user"===s?0:2,width:32}}),(0,n.jsxs)(l.Z,{sx:{flexGrow:1},children:[(0,n.jsxs)(Me.Z,{sx:{backgroundColor:"user"===s?"primary.main":"background.paper",color:"user"===s?"primary.contrastText":"text.primary",px:2,py:1},children:[(0,n.jsx)(l.Z,{sx:{mb:1},children:(0,n.jsx)(Ee.Z,{color:"inherit",sx:{cursor:"pointer"},variant:"subtitle2",children:c})}),"image"===t?(0,n.jsx)(Ie.Z,{onClick:function(){return h(!0)},image:r,sx:{height:200}}):(0,n.jsx)(f.Z,{color:"inherit",variant:"body1",children:r})]}),(0,n.jsx)(l.Z,{sx:{display:"flex",justifyContent:"user"===s?"flex-end":"flex-start",mt:1,px:2},children:(0,n.jsxs)(f.Z,{color:"textSecondary",noWrap:!0,variant:"caption",children:[(0,Re.Z)(i)," ","ago"]})})]})]}))};function De(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function He(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}Be.propTypes={authorAvatar:w().string.isRequired,authorName:w().string.isRequired,authorType:w().oneOf(["contact","user"]).isRequired,body:w().string.isRequired,contentType:w().string.isRequired,createdAt:w().number.isRequired};var Le=function(e){var r=e.messages,t=e.participants,o=He(e,["messages","participants"]),i="/static/mock-images/avatars/avatar-anika_visser.png";return(0,n.jsx)(l.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){De(e,r,t[r])}))}return e}({sx:{p:2}},o,{children:r.map((function(e){var r,o,a,c=t.find((function(r){return r.id===e.authorId}));return"5e86809283e28b96d2d38537"===e.authorId?(r=i,o="Me",a="user"):(r=c.avatar,o=c.name,a="contact"),(0,n.jsx)(Be,{authorAvatar:r,authorName:o,authorType:a,body:e.body,contentType:e.contentType,createdAt:e.createdAt},e.id)}))}))};Le.propTypes={messages:w().array,participants:w().array};var Ne=t(25464),We=t(18972),Ge=t(48885),Fe=t(2940),qe=t(34857),Ve=t(82066),Xe=(0,Ve.Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z",clipRule:"evenodd"})}),"Ban"),_e=(0,Ve.Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Camera"),$e=(0,Ve.Z)((0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})}),"Phone"),Ke=t(25543),Ue=t(60893);function Ye(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Je(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Qe(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){Je(e,r,t[r])}))}return e}function er(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function rr(e){return function(e){if(Array.isArray(e))return Ye(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return Ye(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ye(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var tr=function(e){var r=e.participants,t=er(e,["participants"]),i=(0,o.useRef)(null),a=(0,o.useState)(!1),c=a[0],s=a[1],p="5e86809283e28b96d2d38537",h=r.filter((function(e){return e.id!==p})),v=h.reduce((function(e,r){return rr(e).concat([r.name])}),[]).join(", ");return(0,n.jsxs)(l.Z,Qe({sx:{alignItems:"center",backgroundColor:"background.paper",borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1,display:"flex",flexShrink:0,minHeight:64,px:2,py:1}},t,{children:[(0,n.jsxs)(l.Z,{sx:{alignItems:"center",display:"flex"},children:[(0,n.jsx)(he.Z,{max:2,sx:Qe({},h.length>1&&{"& .MuiAvatar-root":{height:30,width:30,"&:nth-of-type(2)":{mt:"10px"}}}),children:h.map((function(e){return(0,n.jsx)(d.Z,{src:e.avatar||void 0},e.id)}))}),(0,n.jsxs)(l.Z,{sx:{ml:2},children:[(0,n.jsx)(f.Z,{variant:"subtitle2",children:v}),Boolean(1===h.length&&h[0].lastActivity)&&(0,n.jsxs)(f.Z,{color:"textSecondary",variant:"caption",children:["Last active"," ",(0,Re.Z)(h[0].lastActivity,{addSuffix:!0})]})]})]}),(0,n.jsx)(l.Z,{sx:{flexGrow:1}}),(0,n.jsx)(u.Z,{children:(0,n.jsx)($e,{fontSize:"small"})}),(0,n.jsx)(u.Z,{children:(0,n.jsx)(_e,{fontSize:"small"})}),(0,n.jsx)(F.Z,{title:"More options",children:(0,n.jsx)(u.Z,{onClick:function(){s(!0)},ref:i,children:(0,n.jsx)(Ke.B,{fontSize:"small"})})}),(0,n.jsxs)(Ne.Z,{anchorEl:i.current,keepMounted:!0,onClose:function(){s(!1)},open:c,children:[(0,n.jsxs)(We.Z,{children:[(0,n.jsx)(Ge.Z,{children:(0,n.jsx)(Xe,{fontSize:"small"})}),(0,n.jsx)(E.Z,{primary:"Block contact"})]}),(0,n.jsxs)(We.Z,{children:[(0,n.jsx)(Ge.Z,{children:(0,n.jsx)(Ue.r,{fontSize:"small"})}),(0,n.jsx)(E.Z,{primary:"Delete thread"})]}),(0,n.jsxs)(We.Z,{children:[(0,n.jsx)(Ge.Z,{children:(0,n.jsx)(Fe.X,{fontSize:"small"})}),(0,n.jsx)(E.Z,{primary:"Archive thread"})]}),(0,n.jsxs)(We.Z,{children:[(0,n.jsx)(Ge.Z,{children:(0,n.jsx)(qe.U,{fontSize:"small"})}),(0,n.jsx)(E.Z,{primary:"Mute notifications"})]})]})]}))};function nr(e,r,t,n,o,i,a){try{var c=e[i](a),s=c.value}catch(l){return void t(l)}c.done?r(s):Promise.resolve(s).then(n,o)}function or(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var i=e.apply(r,t);function a(e){nr(i,n,o,a,c,"next",e)}function c(e){nr(i,n,o,a,c,"throw",e)}a(void 0)}))}}function ir(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}tr.propTypes={participants:w().array},tr.defaultProps={participants:[]};var ar=function(e){var r=e.threadKey,t=(0,g.I0)(),i=(0,c.useRouter)(),a=(0,g.v9)((function(e){return function(e){var r=e.chat,t=r.threads,n=r.activeThreadId;return t.byId[n]}(e)})),s=(0,o.useRef)(null),u=(0,o.useState)([]),d=u[0],f=u[1],p="5e86809283e28b96d2d38537",h=function(){var e=or(x().mark((function e(){var n,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.x.getParticipants(r);case 3:return n=e.sent,f(n),e.next=7,t((0,b.bJ)(r));case 7:o=e.sent,t((0,b.gG)(o)),t((0,b.RZ)(o)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),i.push("/dashboard/chat").catch(console.error);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){h()}),[r]),(0,o.useEffect)((function(){(null===a||void 0===a?void 0:a.messages)&&(null===s||void 0===s?void 0:s.current)&&(s.current.getScrollElement().scrollTop=s.current.el.scrollHeight)}),[a]);var v=function(){var e=or(x().mark((function e(r){var n,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=6;break}return e.next=4,t((0,b.Hz)({threadId:a.id,body:r}));case 4:e.next=13;break;case 6:return n=d.filter((function(e){return e.id!==p})).map((function(e){return e.id})),e.next=9,t((0,b.Hz)({recipientIds:n,body:r}));case 9:return o=e.sent,e.next=12,t((0,b.bJ)(o));case 12:t((0,b.gG)(o));case 13:(null===s||void 0===s?void 0:s.current)&&s.current.getScrollElement().scrollTo({top:s.current.el.scrollHeight,behavior:"smooth"}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(r){return e.apply(this,arguments)}}();return(0,n.jsxs)(l.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){ir(e,r,t[r])}))}return e}({sx:{display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden"}},e,{children:[(0,n.jsx)(tr,{participants:d}),(0,n.jsx)(l.Z,{sx:{backgroundColor:"background.default",flexGrow:1,overflow:"hidden"},children:(0,n.jsx)(z.L,{ref:s,sx:{maxHeight:"100%"},children:(0,n.jsx)(Le,{messages:(null===a||void 0===a?void 0:a.messages)||[],participants:(null===a||void 0===a?void 0:a.participants)||[]})})}),(0,n.jsx)(y.Z,{}),(0,n.jsx)(K,{disabled:!1,onSend:v})]}))};ar.propTypes={threadKey:w().string.isRequired};var cr=t(64500),sr=t(97777),lr=t(13869);function ur(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var dr=(0,p.ZP)("div",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var r,t,n=e.theme,o=e.open;return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){ur(e,r,t[r])}))}return e}((ur(r={display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden"},n.breakpoints.up("md"),{marginLeft:-380}),ur(r,"transition",n.transitions.create("margin",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen})),r),o&&(ur(t={},n.breakpoints.up("md"),{marginLeft:0}),ur(t,"transition",n.transitions.create("margin",{easing:n.transitions.easing.easeOut,duration:n.transitions.duration.enteringScreen})),t))})),fr=function(){var e=(0,c.useRouter)(),r=(0,g.I0)(),t=(0,o.useRef)(null),i=(0,o.useState)(!0),p=i[0],h=i[1],v="true"===e.query.compose,m=e.query.threadKey,x=(0,s.Z)((function(e){return e.breakpoints.up("md")}),{noSsr:!0});(0,o.useEffect)((function(){lr.w.push({event:"page_view"})}),[]),(0,o.useEffect)((function(){r((0,b.hr)())}),[]),(0,o.useEffect)((function(){h(!!x)}),[x]);if(!e.isReady)return null;var y=m?"thread":v?"compose":"blank";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a(),{children:(0,n.jsx)("title",{children:"Dashboard: Chat | Material Kit Pro"})}),(0,n.jsx)(l.Z,{component:"main",sx:{position:"relative",height:"100%",width:"100%",overflow:"hidden"},children:(0,n.jsxs)(l.Z,{ref:t,sx:{display:"flex",position:"absolute",top:0,right:0,bottom:0,left:0},children:[(0,n.jsx)(Ae,{containerRef:t,onClose:function(){h(!1)},open:p}),(0,n.jsxs)(dr,{open:p,children:[(0,n.jsx)(l.Z,{sx:{alignItems:"center",backgroundColor:"background.paper",borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1,display:"flex",p:2},children:(0,n.jsx)(u.Z,{onClick:function(){h((function(e){return!e}))},children:(0,n.jsx)(sr.j,{fontSize:"small"})})}),"thread"===y&&(0,n.jsx)(ar,{threadKey:m}),"compose"===y&&(0,n.jsx)(ee,{}),"blank"===y&&(0,n.jsxs)(l.Z,{sx:{alignItems:"center",display:"flex",flexGrow:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[(0,n.jsx)(d.Z,{sx:{backgroundColor:"primary.main",color:"primary.contrastText",height:56,width:56},children:(0,n.jsx)(cr.d,{fontSize:"small"})}),(0,n.jsx)(f.Z,{color:"textSecondary",sx:{mt:2},variant:"subtitle1",children:"Start meaningful conversations!"})]})]})]})})]})};fr.getLayout=function(e){return(0,n.jsx)(h.a,{children:(0,n.jsx)(v.c,{children:e})})};var pr=fr}},function(e){e.O(0,[8926,7531,5464,135,8762,2141,2058,8619,9368,2078,6039,9774,2888,179],(function(){return r=88157,e(e.s=r);var r}));var r=e.O();_N_E=r}]);